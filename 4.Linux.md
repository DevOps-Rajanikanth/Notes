# Session - 04
--------------
## Recap
--------
**permissions**
    -read, write, execute numbers  
    -Group permissions and group access  
    -user management (providing access using ssh and password)  
    -deleting users and groups  
    - foreground and background process (&)
    - killing process using pid  
    - force killing the process (using -9)  
    - checking process status - `ps -ef | grep nodejs`  
    - package management  
## agenda 
    - providing sudo access to user and specific commands
    - process management
    - ## 5:30 Service management
## 5:30 Service management

Story:  
> When you are shipping a package from Delhi --> Hyd we will write To address as below
> To address     
> D.No: 123, 2nd floor  
> Tirumala apartment  
> Hitech city  
> Hyderabad  
> 600082  
>
> If we wont write City name and pincode shipping cannot start from Delhi
> No pincode and city - Stuck at Origin city
> No Area name - stuck at Destination city
> No Apartment name - Stuck at Area 
> No door name - stuck at apartment
> 
All Electronic computers have 0 - 65,635 ports  
If we are navigating to https://facebook.com   
`ssh -i <privatekey> username@Host-ip`  
A server is similar to a building and it has certain logical blocks  
ssh = port 22 which is a part of building, if ssh is not specified the request will reach  the computer but the request doesn't know where will it reach ( because of 0-65,635 available ports)  

## algorithm

1. generate key
2. public key import
3. firewall creation
4. ssh connection  
 Debug port by port to fix connection issues 

**When you face errors think slowly and clearly from basics, it will make clear that what was the error**

## 13:00 server creation

**popular port numbers**

1. SSH - Port 22
2. HTTP - Port 80
3. HTTPS - Port 443
4. FTP - Port 21
5. SMTP - Port 25
6. POP3 - Port 110
7. IMAP - Port 143
8. DNS - Port 53
9. LDAP - Port 389
10. MySQL - Port 3306

## 14:51 connecting to server

we are able to connect to ssh since its already running in the server `ps -ef | grep ssh` lists the ssh details

> first request reaches Host - IP  
> Since the protocol is ssh it checks if ssh service is running on port 22  
> if ssh service is available on port 22 then checks for auth  
> If auth is true then connection is established  


If we are navigating to https://facebook.com  
> request will be forwarded to IP of facebook  
> Protocol = https = 443 ,  
> computer / server checks if service is running on 443 port  
> if service is running then the facebook webpage is loaded or we will get error  

## 18:00 nginx installation
Installing nginx on amazon linux `sudo amazon-linux-extras install nginx1 -y` 

## service 
If a package has to offer service the package / software must be alive and running

`sudo systemctl start nginx` - starting nginx  
`systemctl status nginx` - checks if nginx is running  
`ps -ef | grep nginx` - checks if nginx is running  

http runs on - port 80

serveraddresss:80 - shows nginx webpage
http:52.90.162.131:80

`sudo systemctl stop nginx` - stops nginx  

if you hit server now with same URL , even request reaches the server the service is not running (nothing on port 80) so it doesn't show webpage 


`systemctl enable nginx` --> if services are enabled, after restart automatically service will run  

## Network management

`netstat` - network statistics

`netstat -lntp` - **very important command**

Certainly! Here's a simple explanation of the `netstat -lntp` command:

- **netstat**: This command is used for displaying network connections, routing tables, interface statistics, masquerade connections, and multicast memberships.

- **-l**: This option stands for "listening" and tells netstat to display only listening sockets. These are the sockets actively waiting for incoming connections.

- **-n**: This option instructs netstat to display numerical addresses instead of resolving hostnames and ports to their symbolic representations. It speeds up the output because it doesn't require DNS lookups.

- **-t**: This option filters the output to **display only TCP connections and listening sockets**.

- **-p**: This option shows the process ID (PID) and name of the program that owns each socket.

So, when you run `netstat -lntp`, you're asking netstat to display a list of all TCP listening sockets along with their corresponding PID and program name, using numerical addresses instead of resolving hostnames. This is useful for understanding which programs are listening for incoming connections on your system and which ports they're using.

![netstat lntp](images/4-netstat-lntp.png)

`sudo netstat -lntp` shows the name of application which started the process


## 22:53 troubleshooting process 

### System resouces checking
system resources
>cpu memory -->  
> HD full --> `df -hT`  
>RAm full --> `free -m`  
>process is running or not --> `ps -ef | grep nginx`  
>port opened or not --> `netstat -lntp`  
>`systemctl status <service>` -->   
>firewall is opened or not  

`top` shows system usage  
`df -hT`  
The command `df -hT` is used to display disk space usage in a human-readable format (`-h`) along with the filesystem type (`-T`). 

Here's what each option does:

- `-h`: This option stands for "human-readable," which formats the output sizes in a more understandable format (e.g., KB, MB, GB).
  
- `-T`: This option tells `df` to display the type of filesystem each filesystem belongs to.

When you run `df -hT`, you'll get a listing of all mounted filesystems along with their sizes, usage, available space, usage percentage, and filesystem type. This can be useful for quickly identifying the types of filesystems in use on your system and how much space they're consuming.

we will then check ram by `free -m`

if everything is fine related to system we will check the process
>check if service is running
>if not start the service and enable the service
>`telnet` to check system to system connection
Telnet is a network protocol used on the Internet or local area networks to provide a bidirectional interactive text-oriented communication facility using a virtual terminal connection. It allows one computer to control another remotely over a network, typically via the Internet or a local network.
### Telnet
Here's a brief overview of how Telnet works:

1. **Connection**: Telnet operates by establishing a connection between two computers, known as the client and the server. The client initiates the connection to the server.

2. **Port**: Telnet typically uses port 23 by default, though it can be configured to use different ports.

3. **Terminal Emulation**: Once the connection is established, Telnet emulates a terminal on the client's computer, allowing the user to interact with the remote server as if they were using a local terminal.

4. **Text-based Communication**: Telnet transfers data between the client and server in plain text format. This means that any data, including passwords or sensitive information, sent over a Telnet connection is transmitted in clear text and is susceptible to interception.

5. **Usage**: Telnet is often used for remote administration, troubleshooting, and testing network services. However, due to its lack of security (since it doesn't encrypt data), its usage has declined in favor of more secure alternatives like SSH (Secure Shell).

While Telnet can still be useful in certain contexts, it's generally recommended to use more secure protocols like SSH for remote access and administration tasks to ensure the confidentiality and integrity of data transmitted over a network.

### Telnet flags
Telnet command can be used with various flags to customize its behavior. Here are some commonly used flags:

1. **-l username**: Specifies the username to use when logging in to the remote system.

2. **-a**: Specifies that authentication is to be performed automatically, using the user's account information.

3. **-b host**: Specifies the source address to use when making the telnet connection.

4. **-t terminal_type**: Specifies the terminal type to be negotiated with the remote system.

5. **-d**: Enables debugging mode, which displays verbose information about the connection process.

6. **-e escape_char**: Sets the escape character used to enter telnet command mode.

7. **-k**: Enables the "keepalive" option, which sends periodic packets to keep the connection alive.

8. **-n**: Prevents telnet from attempting to resolve hostnames to IP addresses.

9. **-r**: Specifies that telnet should enter "binary" mode, where it does not interpret carriage return characters.

10. **-L**: Redirects input/output from/to a file rather than the terminal.

For example:
```
telnet -l username remote_host
```
This command connects to the remote host using the specified username.

```
telnet -d remote_host
```
This command enables debugging mode to display detailed information about the connection process.

Using flags with the telnet command allows you to customize its behavior according to your specific requirements.

### to check if system is breathing network
`ping` 
When using the `ping` command in Linux, you can customize its behavior and control various aspects of how it operates by using different options. Here are some common options:

1. **-c count**: Specifies the number of packets to send before stopping. For example, `ping -c 5 google.com` will send 5 ICMP echo request packets to Google's server.

2. **-s size**: Sets the size of the packets to be sent. This allows you to test the network's response to different packet sizes. For example, `ping -s 100 google.com` will send packets of size 100 bytes.

3. **-i interval**: Sets the interval between sending each packet, in seconds. This allows you to control the rate of packet transmission. For example, `ping -i 0.2 google.com` will send packets every 0.2 seconds.

4. **-w deadline**: Sets a deadline for the ping command to stop. After the specified time (in seconds), ping will stop regardless of how many packets have been sent or received. For example, `ping -w 10 google.com` will stop after 10 seconds.

5. **-q**: Quiet output. Suppresses normal output and only displays summary statistics at the end. Useful for scripting or when you only want to see the final results.

6. **-v**: Verbose output. Displays more detailed information about each packet, including round-trip times and TTL (Time To Live) values.

7. **-R**: Record route. Requests that the route packets take be traced and displayed. Useful for diagnosing routing issues.

8. **-n**: Numeric output. Prevents `ping` from attempting to resolve IP addresses to hostnames, displaying numeric IP addresses instead.

These are just a few of the options available with the `ping` command. You can see a full list of options and their descriptions by typing `man ping` in the terminal, which will display the manual page for the `ping` command.

**check if firewall is open before checking for service**

### 33:50 heavy RAM usage
It will take time to debug so we will kill process and restart the service 
some times more number of connections will be opened by developer to db (for ex 100) in this case the whole RAM will be occupied by service so we will kill the process and start the process to avoid business outage


## 34:25 How to give access to linux user

Linux Admin --> full access to linux
DevOps Admin -- > needs limited sudo acces

ramesh --> admin
suresh -- > devops

35:51    
































